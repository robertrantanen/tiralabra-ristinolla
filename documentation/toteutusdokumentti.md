## Ohjelman yleisrakenne

Algoritmit, pelilaudan logiikka ja käyttöliittymä on yritetty erottaa toisistaan. Algoritmit-packagessa oleva Minimax-luokka hoitaa itse algoritmin toiminnan. Minimax-luokan laudanTulos-metodi tosin sivuaa myös pelilaudan logiikkaa, mutta päätin jättää metodin Minimax-luokkaan, sillä algoritmi tarvitsee sitä. Pelilauta-packagen Pelilauta-luokka hoitaa muun pelilaudan logiikan, kuten pelilaudan alustamisen tyhjillä merkeillä ja pelilaudan tulostamisen. Luokan konstruktori mahdollistaa suurempien pelilautojen luomisen. Main-packagen Kayttoliittyma-luokassa taas on tekstikäyttöliittymä, joka mahdollistaa pelaamisen tekoälyä vastaan tai tekoälyn pelaamisen itseään vastaan.

Minimax-algoritmia optimoidaan alpha-beta pruning-menetelmällä, jonka avulla vältetään turhien laskentaoperaatioiden tekemistä. Jos tiedetään, että vastapelaaja ei tule ikinä valitsemaan jotain siirtoa, niin kyseiseen siirtoon liittyvä laskentapuu voidaan jättää käymättä läpi. Algoritmia optimoidaan myös Minimax-luokan aloitusSyvyys-metodilla, joka valitsee algoritmille pienemmän aloitussyvyyden laudan koon ja tyhjien ruutujen perusteella. Tämä tekee algoritmista paljon nopeamman, mutta mahdollisesti epätarkemman. Pieni aloitussyvyys johtaa algoritmille hieman tyhmään käyttäytymiseen suurella laudan koolla, mutta jostakin pitää säästää jos halutaan ajaa ohjelma siedettävässä ajassa.

## Mahdollisia puutteita

Jos kaikki mahdolliset siirrot ovat yhtä hyviä tai huonoja, niin algoritmi valitsee niistä ensimmäisen. Tämä johtuu siitä, että "if arvo > paras" -tyyppiset ehdot eivät pääse toteutumaan, joten palautetaan vain ensimmäinen vaihtoehto. Tämä on hieman ikävän näköistä tilanteissa, missä algoritmi häviää varmasti seuraavalla siirrolla. Ihmispelaaja yrittäisi jotenkin epätoivoisesti estää häviöitään, mutta algoritmi nappaa vain ensimmäisen tyhjän ruudun. Tämä ilmiö tapahtuu myös, kun algoritmi pelaa suurella laudalla, pienellä aloitussyvyydellä ja suurella voittorivillä: pienen syvyyden takia ei nähdä pitkälle tulevaisuuteen, joten kaikki vaihtoehdot johtavat vain nollatulokseen, eli napataan ensimmäinen tyhjä ruutu. Pieni aloitussyvyys on kuitenkin välttämätöntä suurella laudalla, koska muuten ohjelman ajamisessa kestäisi ikuisuus.

Viimeisillä metreillä lisäsin toiminnallisuuden, että ihminen voi pelata algoritmia vastaan isolla pelilaudalla. Aluksi jätin tämän toteuttamatta, koska se on kömpelöä tekstikäyttöliittymällä. Tällä toiminnallisuudella kuitenkin huomasin, että algoritmi ei toimikaan niin älykkäästi kuin luulin. Jostain syystä algoritmi ei oikein osaa toimia tilanteessa, missä vain laudan keskellä on merkkejä. Nykyisessä toteutuksessa tietokonepelaaja aloittaa ennen ihmistä ja laittaa ensimmäisen siirron vasempaan ylänurkkaan, tämän jälkeen algoritmi on ihan älykäs. Mutta jos aloitussiirto on laudan keskellä, niin algoritmi alkaa säätämään vasenta ylänurkkaa ja häviää aika varmasti.

Yksi pieni puute on, että laudanTulos-metodi on yli 100 merkkiä pitkä. Tätä ei voida kuitenkaan mielestäni voida jakaa kovin järkevästi osiin, koska metodin täytyy käydä läpi kaikki ilmansuunnat, jotta se voi nähdä, johtiko edellinen siirto voittoon.
